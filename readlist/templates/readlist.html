{% extends 'base.html' %}

{% block content %}
<div class="text-white mx-3">
<head>
    <title>Top 5 Readlists</title>
</head>
<body>
    <h1>Top 5 Readlists</h1>
    <div class="grid grid-cols-3 gap-4">
        {% for readlist in top_5_readlists %}
            <div class="rounded-xl shadow-lg bg-zinc-800 relative">
                {% if readlist.books.first %}
                    <img class="rounded-xl overflow-hidden w-52 mt-4 ml-4" src="{{ readlist.books.first.image_link }}" alt="{{ readlist.books.first.title }}">
                {% endif %}
                <div class="p-4 space-y-2">
                    <h2 class="text-lg font-bold">{{ readlist.name }}</h2>
                    <h5>Made by: {{ readlist.user.username }}</h5>
                    <ul>
                        {{readlist.description}}
                    </ul>
                    <p>likes: {{readlist.likes}}</p>
                    <button id="likeBtn">like</button>
                </div>
            </div>
        {% endfor %}
    </div>

    <a href="{% url 'readlist:create_readlist' %}">Create your own read list</a>
</body>
</div>
<script>
    document.getElementById("likeBtn").addEventListener("click", function() {
  // Make an AJAX request to the server
  fetch("{% url 'readlist:show_readlist' %}")
    .then(function(response) {
      if (response.ok) {
        return response.text();
      } else {
        throw new Error("Error: " + response.status);
      }
    })
    .then(function(data) {
      // Handle the response from the server
      console.log(data);
    })
    .catch(function(error) {
      // Handle any errors that occurred during the request
      console.error(error);
    });
});
</script>

{% endblock content %}